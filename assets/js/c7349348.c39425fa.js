"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[435],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,k=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(k,i(i({ref:t},c),{},{components:n})):a.createElement(k,i({ref:t},c))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4775:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const r={},i="Using the Token System",s={unversionedId:"api-information/token-usage",id:"api-information/token-usage",title:"Using the Token System",description:"The PersonalizePro API provides a token system to secure all API routes from unauthorized access. This guide will explain how to enable and use the token system to ensure that only authorized users can access the API.",source:"@site/docs/api-information/token-usage.md",sourceDirName:"api-information",slug:"/api-information/token-usage",permalink:"/docs/api-information/token-usage",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-information/token-usage.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Using Docker",permalink:"/docs/api-information/docker-usage"},next:{title:"Using Webhooks",permalink:"/docs/api-information/webhook-usage"}},l={},p=[{value:"Enabling the Token System",id:"enabling-the-token-system",level:2},{value:"Defining API Tokens",id:"defining-api-tokens",level:2},{value:"Accessing Requester Information",id:"accessing-requester-information",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"using-the-token-system"},"Using the Token System"),(0,o.kt)("p",null,"The PersonalizePro API provides a token system to secure all API routes from unauthorized access. This guide will explain how to enable and use the token system to ensure that only authorized users can access the API."),(0,o.kt)("h2",{id:"enabling-the-token-system"},"Enabling the Token System"),(0,o.kt)("p",null,"To enable the token system, you need to modify the settings in the ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.js")," file located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"/api/src/configuration/")," directory."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Navigate to the Configuration Directory:"),"\nOpen the ",(0,o.kt)("inlineCode",{parentName:"p"},"/api/src/configuration/")," directory in your project.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Open the ",(0,o.kt)("inlineCode",{parentName:"strong"},"settings.js")," File:"),"\nIn the ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.js")," file, you will find an object that defines various configurations for the API.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Enable Authentication:"),"\nLocate the ",(0,o.kt)("inlineCode",{parentName:"p"},"auth")," property within the ",(0,o.kt)("inlineCode",{parentName:"p"},"api")," object and set it to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," to enable authentication."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'module.exports = {\n  api: {\n    port: 5000,\n    auth: true, // TURN ON AUTH HERE\n  },\n  database: {\n    port: 27017,\n    host: "mongo",\n  },\n};\n')),(0,o.kt)("h2",{id:"defining-api-tokens"},"Defining API Tokens"),(0,o.kt)("p",null,"The API tokens are defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"api-tokens.js")," file, also located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"/api/src/configuration/")," directory. This file contains an array of objects, each representing an API token."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Open the ",(0,o.kt)("inlineCode",{parentName:"strong"},"api-tokens.js")," File:"),"\nIn the ",(0,o.kt)("inlineCode",{parentName:"p"},"api-tokens.js")," file, you will find an array containing objects representing API tokens.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Add New Tokens:"),"\nTo add a new API token, simply add a new object to the array with the ",(0,o.kt)("inlineCode",{parentName:"p"},"token")," property set to the desired token value."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'module.exports = [\n  {\n    token: "1234567890",\n  },\n  {\n    token: "0987654321",\n  },\n  // Add more tokens if needed\n];\n')),(0,o.kt)("p",null,"You can add as many tokens as necessary to accommodate all authorized users or applications."),(0,o.kt)("h2",{id:"accessing-requester-information"},"Accessing Requester Information"),(0,o.kt)("p",null,"When a request is made to an authenticated route, the token used to make the request is available in the ",(0,o.kt)("inlineCode",{parentName:"p"},"req.auth")," object. You can access the requester information as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'api.get("/token-check", (req, res) => {\n  const { token } = req.auth;\n  console.log(`REQUEST WAS MADE BY: ${token}`);\n});\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"req.auth")," object contains the ",(0,o.kt)("inlineCode",{parentName:"p"},"token")," property, which holds the API token used to make the request. This allows you to track which token was used for each request, helpful for monitoring and debugging purposes."),(0,o.kt)("p",null,"By enabling and using the token system provided by the PersonalizePro API, you can secure all API routes from unauthorized access. Only users or applications with valid API tokens defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"api-tokens.js")," file will be allowed to access the protected routes. This adds an extra layer of security to your API, ensuring that sensitive data and functionalities are accessible only to authorized entities. Always keep your API tokens secure and only share them with trusted parties."))}d.isMDXComponent=!0}}]);